[{"@type":"WorkflowSubscription","id":"0486ac35-f360-41b4-9879-a6c26d705941","eventTopicId":"com.vmware.csp.iaas.blueprint.service.machine.lifecycle.provision","workflowId":"b97a48b8-b513-4f4c-9762-8ac189387c27","tenantId":"icds","name":"Gather OCP nodes config","blocking":true,"failOnError":false,"reply":false,"status":"DRAFT","statusName":"Draft","criteria":{"type":"and","subClauses":[{"type":"expression","operator":{"type":"equals"},"leftOperand":{"type":"path","path":"data~lifecycleState~state"},"rightOperand":{"type":"constant","value":{"type":"string","value":"VMPSMasterWorkflow32.BuildingMachine"}}},{"type":"expression","operator":{"type":"equals"},"leftOperand":{"type":"path","path":"data~lifecycleState~phase"},"rightOperand":{"type":"constant","value":{"type":"string","value":"PRE"}}},{"type":"expression","operator":{"type":"contains"},"leftOperand":{"type":"path","path":"data~blueprintName"},"rightOperand":{"type":"constant","value":{"type":"string","value":"Deploy OpenShift Container Platform"}}},{"type":"expression","operator":{"type":"contains"},"leftOperand":{"type":"path","path":"data~componentId"},"rightOperand":{"type":"constant","value":{"type":"string","value":"BootstrapNode"}}}]},"version":{"version":"0.0.0","major":0,"minor":0,"micro":0,"revision":null},"description":"","priority":10,"timeout":10},{"@type":"WorkflowSubscription","id":"807b1f6c-af97-4b57-afa4-7b2122f4b465","eventTopicId":"com.vmware.csp.iaas.blueprint.service.machine.lifecycle.provision","workflowId":"07368642-d71c-45ee-9314-f0ac2a0432f0","tenantId":"icds","name":"Update OCP nodes vm config","blocking":true,"failOnError":true,"reply":false,"status":"PUBLISHED","statusName":"Published","criteria":{"type":"and","subClauses":[{"type":"expression","operator":{"type":"equals"},"leftOperand":{"type":"path","path":"data~lifecycleState~state"},"rightOperand":{"type":"constant","value":{"type":"string","value":"CloneWorkflow.InitialPowerOn"}}},{"type":"expression","operator":{"type":"equals"},"leftOperand":{"type":"path","path":"data~lifecycleState~phase"},"rightOperand":{"type":"constant","value":{"type":"string","value":"PRE"}}},{"type":"expression","operator":{"type":"equals"},"leftOperand":{"type":"path","path":"data~blueprintName"},"rightOperand":{"type":"constant","value":{"type":"string","value":"Deploy OpenShift Container Platform"}}},{"type":"or","subClauses":[{"type":"expression","operator":{"type":"contains"},"leftOperand":{"type":"path","path":"data~componentId"},"rightOperand":{"type":"constant","value":{"type":"string","value":"BootstrapNode"}}},{"type":"expression","operator":{"type":"contains"},"leftOperand":{"type":"path","path":"data~componentId"},"rightOperand":{"type":"constant","value":{"type":"string","value":"MasterNode"}}},{"type":"expression","operator":{"type":"contains"},"leftOperand":{"type":"path","path":"data~componentId"},"rightOperand":{"type":"constant","value":{"type":"string","value":"WorkerNode"}}}]}]},"version":{"version":"0.0.0","major":0,"minor":0,"micro":0,"revision":null},"description":"","priority":10,"timeout":10},{"@type":"WorkflowSubscription","id":"36a69192-8c4e-4ed7-aca5-17bc3b79f33e","eventTopicId":"com.vmware.csp.iaas.blueprint.service.machine.lifecycle.provision","workflowId":"93fcce74-03bf-4cc5-a231-30b0e74c3250","tenantId":"icds","name":"Run Script In Guest","blocking":true,"failOnError":true,"reply":false,"status":"DRAFT","statusName":"Draft","criteria":{"type":"and","subClauses":[{"type":"expression","operator":{"type":"equals"},"leftOperand":{"type":"path","path":"data~lifecycleState~state"},"rightOperand":{"type":"constant","value":{"type":"string","value":"VMPSMasterWorkflow32.MachineProvisioned"}}},{"type":"expression","operator":{"type":"equals"},"leftOperand":{"type":"path","path":"data~lifecycleState~phase"},"rightOperand":{"type":"constant","value":{"type":"string","value":"POST"}}},{"type":"expression","operator":{"type":"contains"},"leftOperand":{"type":"path","path":"data~blueprintName"},"rightOperand":{"type":"constant","value":{"type":"string","value":"Ansible_Test"}}}]},"version":{"version":"0.0.0","major":0,"minor":0,"micro":0,"revision":null},"description":"Run a script inside the VM and wait until it returns his result.\nRetrieve the output of the script and returns it as output in the workflow\n\nInspired by implementation done in PowerCLI in the following .NET class :\n- VMware.VimAutomation.ViCore.Impl.V1.RunScriptInGuestHelper\n- VMware.VimAutomation.ViCore.Impl.V1.Service.VmGuestServiceImpl\n\nRequires running VMwareTools instance in the GuestOS.\nLeverages the vSphere 5.x GuestOperationsManager object and is not backwards compatible with previous versions of vSphere.","priority":10,"timeout":null},{"@type":"WorkflowSubscription","id":"9f7e2826-0414-42c8-b7d7-02068e3c49c1","eventTopicId":"com.vmware.csp.iaas.blueprint.service.machine.lifecycle.provision","workflowId":"98638b50-6ab7-4b6a-8fd7-f549114eb5c6","tenantId":"icds","name":"Perform bastion configuration","blocking":true,"failOnError":true,"reply":false,"status":"PUBLISHED","statusName":"Published","criteria":{"type":"and","subClauses":[{"type":"expression","operator":{"type":"equals"},"leftOperand":{"type":"path","path":"data~lifecycleState~state"},"rightOperand":{"type":"constant","value":{"type":"string","value":"VMPSMasterWorkflow32.MachineProvisioned"}}},{"type":"expression","operator":{"type":"equals"},"leftOperand":{"type":"path","path":"data~lifecycleState~phase"},"rightOperand":{"type":"constant","value":{"type":"string","value":"POST"}}},{"type":"expression","operator":{"type":"equals"},"leftOperand":{"type":"path","path":"data~blueprintName"},"rightOperand":{"type":"constant","value":{"type":"string","value":"Deploy OpenShift Container Platform"}}},{"type":"expression","operator":{"type":"contains"},"leftOperand":{"type":"path","path":"data~componentId"},"rightOperand":{"type":"constant","value":{"type":"string","value":"BastionNode"}}}]},"version":{"version":"0.0.0","major":0,"minor":0,"micro":0,"revision":null},"description":"","priority":10,"timeout":15},{"@type":"WorkflowSubscription","id":"46f35289-0923-480a-9260-1dc44e117633","eventTopicId":"com.vmware.csp.iaas.blueprint.service.machine.lifecycle.provision","workflowId":"5a2f966e-df2f-4ba8-ae0d-62fd7d61ca18","tenantId":"icds","name":"captureIPs","blocking":true,"failOnError":false,"reply":false,"status":"PUBLISHED","statusName":"Published","criteria":{"type":"and","subClauses":[{"type":"expression","operator":{"type":"equals"},"leftOperand":{"type":"path","path":"data~lifecycleState~phase"},"rightOperand":{"type":"constant","value":{"type":"string","value":"PRE"}}},{"type":"expression","operator":{"type":"equals"},"leftOperand":{"type":"path","path":"data~lifecycleState~state"},"rightOperand":{"type":"constant","value":{"type":"string","value":"VMPSMasterWorkflow32.Requested"}}}]},"version":{"version":"0.0.0","major":0,"minor":0,"micro":0,"revision":null},"description":"","priority":10,"timeout":null}]